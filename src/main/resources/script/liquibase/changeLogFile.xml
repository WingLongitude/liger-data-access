<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    <changeSet author="pedro (generated)" id="1425320964738-1">
        <createTable tableName="contact">
            <column autoIncrement="true" name="auto_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="contact_pkey"/>
            </column>
            <column name="name" type="TEXT"/>
            <column name="position_name" type="TEXT"/>
            <column name="organization_name" type="TEXT"/>
            <column name="address" type="TEXT"/>
            <column name="city" type="TEXT"/>
            <column name="administrative_area" type="TEXT"/>
            <column name="country" type="TEXT"/>
            <column name="postal_code" type="TEXT"/>
            <column name="phone" type="TEXT"/>
            <column name="email" type="TEXT"/>
            <column name="role" type="TEXT"/>
            <column name="publisher_fkey" type="INT4"/>
            <column name="resource_metadata_fkey" type="INT4"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-2">
        <createTable tableName="db_metadata">
            <column name="schema_version" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="schema_version_date" type="date"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-3">
        <createTable tableName="download_log">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="download_log_pkey"/>
            </column>
            <column name="event_date" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="search_criteria" type="TEXT"/>
            <column name="number_of_records" type="INT4"/>
            <column name="email" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-4">
        <createTable tableName="dwca_resource">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="dwca_resource_pkey"/>
            </column>
            <column name="name" type="TEXT"/>
            <column name="sourcefileid" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="resource_uuid" type="TEXT"/>
            <column name="archive_url" type="TEXT"/>
            <column defaultValueBoolean="false" name="is_local" type="BOOL">
                <constraints nullable="false"/>
            </column>
            <column name="record_count" type="INT4"/>
            <column name="publisher_fkey" type="INT4"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-5">
        <createTable tableName="import_log">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="import_log_pkey"/>
            </column>
            <column name="sourcefileid" type="TEXT"/>
            <column name="resource_uuid" type="TEXT"/>
            <column name="record_quantity" type="INT4"/>
            <column name="updated_by" type="TEXT"/>
            <column name="import_process_duration_ms" type="INT4"/>
            <column name="event_end_date_time" type="TIMESTAMP WITHOUT TIME ZONE"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-6">
        <createTable tableName="occurrence">
            <column name="auto_id" type="INT4">
                <constraints nullable="false"/>
            </column>
            <column name="dwca_id" type="TEXT"/>
            <column name="resource_uuid" type="TEXT"/>
            <column name="sourcefileid" type="TEXT"/>
            <column name="associatedmedia" type="TEXT"/>
            <column name="associatedsequences" type="TEXT"/>
            <column name="basisofrecord" type="TEXT"/>
            <column name="bibliographiccitation" type="TEXT"/>
            <column name="catalognumber" type="TEXT"/>
            <column name="othercatalognumbers" type="TEXT"/>
            <column name="occurrenceid" type="TEXT"/>
            <column name="_references" type="TEXT"/>
            <column name="collectioncode" type="TEXT"/>
            <column name="continent" type="TEXT"/>
            <column name="country" type="TEXT"/>
            <column name="county" type="TEXT"/>
            <column name="municipality" type="TEXT"/>
            <column name="datasetname" type="TEXT"/>
            <column name="habitat" type="TEXT"/>
            <column name="locality" type="TEXT"/>
            <column name="kingdom" type="TEXT"/>
            <column name="phylum" type="TEXT"/>
            <column name="_class" type="TEXT"/>
            <column name="_order" type="TEXT"/>
            <column name="family" type="TEXT"/>
            <column name="genus" type="TEXT"/>
            <column name="specificepithet" type="TEXT"/>
            <column name="infraspecificepithet" type="TEXT"/>
            <column name="species" type="TEXT"/>
            <column name="recordedby" type="TEXT"/>
            <column name="recordnumber" type="TEXT"/>
            <column name="institutioncode" type="TEXT"/>
            <column name="scientificname" type="TEXT"/>
            <column name="rawscientificname" type="TEXT"/>
            <column name="scientificnameauthorship" type="TEXT"/>
            <column name="stateprovince" type="TEXT"/>
            <column name="typestatus" type="TEXT"/>
            <column name="taxonrank" type="TEXT"/>
            <column name="verbatimelevation" type="TEXT"/>
            <column name="minimumelevationinmeters" type="FLOAT8"/>
            <column name="maximumelevationinmeters" type="FLOAT8"/>
            <column name="decimallatitude" type="FLOAT8"/>
            <column name="decimallongitude" type="FLOAT8"/>
            <column name="datageneralizations" type="TEXT"/>
            <column name="eventdate" type="TEXT"/>
            <column name="starteventdate" type="date"/>
            <column name="endeventdate" type="date"/>
            <column name="sday" type="SMALLINT"/>
            <column name="smonth" type="SMALLINT"/>
            <column name="syear" type="SMALLINT"/>
            <column name="eday" type="SMALLINT"/>
            <column name="emonth" type="SMALLINT"/>
            <column name="eyear" type="SMALLINT"/>
            <column name="decade" type="SMALLINT"/>
            <column name="averagealtituderounded" type="INT4"/>
            <column name="hascoordinates" type="BOOL"/>
            <column name="hasmedia" type="BOOL"/>
            <column name="hastypestatus" type="BOOL"/>
            <column name="hasassociatedsequences" type="BOOL"/>
            <column name="publishername" type="TEXT"/>
            <column name="resourcename" type="TEXT"/>
            <column name="the_geom" type="GEOMETRY(2147483647)"/>
            <column name="the_geom_webmercator" type="GEOMETRY(2147483647)"/>
            <column name="the_shifted_geom" type="GEOMETRY(2147483647)"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-7">
        <createTable tableName="occurrence_extension">
            <column name="auto_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="dwca_id" type="TEXT"/>
            <column name="resource_uuid" type="TEXT"/>
            <column name="sourcefileid" type="TEXT"/>
            <column name="ext_type" type="TEXT"/>
            <column name="ext_version" type="TEXT"/>
            <column name="ext_data" type="HSTORE(2147483647)"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-8">
        <createTable tableName="occurrence_raw">
            <column name="auto_id" type="INT4">
                <constraints nullable="false"/>
            </column>
            <column name="dwca_id" type="TEXT"/>
            <column name="resource_uuid" type="TEXT"/>
            <column name="sourcefileid" type="TEXT"/>
            <column name="acceptednameusage" type="TEXT"/>
            <column name="acceptednameusageid" type="TEXT"/>
            <column name="accessrights" type="TEXT"/>
            <column name="associatedmedia" type="TEXT"/>
            <column name="associatedoccurrences" type="TEXT"/>
            <column name="associatedreferences" type="TEXT"/>
            <column name="associatedsequences" type="TEXT"/>
            <column name="associatedtaxa" type="TEXT"/>
            <column name="basisofrecord" type="TEXT"/>
            <column name="bed" type="TEXT"/>
            <column name="behavior" type="TEXT"/>
            <column name="bibliographiccitation" type="TEXT"/>
            <column name="catalognumber" type="TEXT"/>
            <column name="_class" type="TEXT"/>
            <column name="collectioncode" type="TEXT"/>
            <column name="collectionid" type="TEXT"/>
            <column name="continent" type="TEXT"/>
            <column name="coordinateprecision" type="TEXT"/>
            <column name="coordinateuncertaintyinmeters" type="TEXT"/>
            <column name="country" type="TEXT"/>
            <column name="countrycode" type="TEXT"/>
            <column name="county" type="TEXT"/>
            <column name="datageneralizations" type="TEXT"/>
            <column name="datasetid" type="TEXT"/>
            <column name="datasetname" type="TEXT"/>
            <column name="dateidentified" type="TEXT"/>
            <column name="day" type="TEXT"/>
            <column name="decimallatitude" type="TEXT"/>
            <column name="decimallongitude" type="TEXT"/>
            <column name="disposition" type="TEXT"/>
            <column name="dynamicproperties" type="TEXT"/>
            <column name="earliestageorloweststage" type="TEXT"/>
            <column name="earliesteonorlowesteonothem" type="TEXT"/>
            <column name="earliestepochorlowestseries" type="TEXT"/>
            <column name="earliesteraorlowesterathem" type="TEXT"/>
            <column name="earliestperiodorlowestsystem" type="TEXT"/>
            <column name="enddayofyear" type="TEXT"/>
            <column name="establishmentmeans" type="TEXT"/>
            <column name="eventdate" type="TEXT"/>
            <column name="eventid" type="TEXT"/>
            <column name="eventremarks" type="TEXT"/>
            <column name="eventtime" type="TEXT"/>
            <column name="family" type="TEXT"/>
            <column name="fieldnotes" type="TEXT"/>
            <column name="fieldnumber" type="TEXT"/>
            <column name="footprintspatialfit" type="TEXT"/>
            <column name="footprintsrs" type="TEXT"/>
            <column name="footprintwkt" type="TEXT"/>
            <column name="formation" type="TEXT"/>
            <column name="genus" type="TEXT"/>
            <column name="geodeticdatum" type="TEXT"/>
            <column name="geologicalcontextid" type="TEXT"/>
            <column name="georeferencedby" type="TEXT"/>
            <column name="georeferenceddate" type="TEXT"/>
            <column name="georeferenceprotocol" type="TEXT"/>
            <column name="georeferenceremarks" type="TEXT"/>
            <column name="georeferencesources" type="TEXT"/>
            <column name="georeferenceverificationstatus" type="TEXT"/>
            <column name="_group" type="TEXT"/>
            <column name="habitat" type="TEXT"/>
            <column name="higherclassification" type="TEXT"/>
            <column name="highergeography" type="TEXT"/>
            <column name="highergeographyid" type="TEXT"/>
            <column name="highestbiostratigraphiczone" type="TEXT"/>
            <column name="identificationid" type="TEXT"/>
            <column name="identificationqualifier" type="TEXT"/>
            <column name="identificationreferences" type="TEXT"/>
            <column name="identificationremarks" type="TEXT"/>
            <column name="identificationverificationstatus" type="TEXT"/>
            <column name="identifiedby" type="TEXT"/>
            <column name="individualcount" type="TEXT"/>
            <column name="individualid" type="TEXT"/>
            <column name="informationwithheld" type="TEXT"/>
            <column name="infraspecificepithet" type="TEXT"/>
            <column name="institutioncode" type="TEXT"/>
            <column name="institutionid" type="TEXT"/>
            <column name="island" type="TEXT"/>
            <column name="islandgroup" type="TEXT"/>
            <column name="kingdom" type="TEXT"/>
            <column name="language" type="TEXT"/>
            <column name="latestageorhigheststage" type="TEXT"/>
            <column name="latesteonorhighesteonothem" type="TEXT"/>
            <column name="latestepochorhighestseries" type="TEXT"/>
            <column name="latesteraorhighesterathem" type="TEXT"/>
            <column name="latestperiodorhighestsystem" type="TEXT"/>
            <column name="lifestage" type="TEXT"/>
            <column name="lithostratigraphicterms" type="TEXT"/>
            <column name="locality" type="TEXT"/>
            <column name="locationaccordingto" type="TEXT"/>
            <column name="locationid" type="TEXT"/>
            <column name="locationremarks" type="TEXT"/>
            <column name="lowestbiostratigraphiczone" type="TEXT"/>
            <column name="maximumdepthinmeters" type="TEXT"/>
            <column name="maximumdistanceabovesurfaceinmeters" type="TEXT"/>
            <column name="maximumelevationinmeters" type="TEXT"/>
            <column name="member" type="TEXT"/>
            <column name="minimumdepthinmeters" type="TEXT"/>
            <column name="minimumdistanceabovesurfaceinmeters" type="TEXT"/>
            <column name="minimumelevationinmeters" type="TEXT"/>
            <column name="modified" type="TEXT"/>
            <column name="month" type="TEXT"/>
            <column name="municipality" type="TEXT"/>
            <column name="nameaccordingto" type="TEXT"/>
            <column name="nameaccordingtoid" type="TEXT"/>
            <column name="namepublishedin" type="TEXT"/>
            <column name="namepublishedinid" type="TEXT"/>
            <column name="namepublishedinyear" type="TEXT"/>
            <column name="nomenclaturalcode" type="TEXT"/>
            <column name="nomenclaturalstatus" type="TEXT"/>
            <column name="occurrenceid" type="TEXT"/>
            <column name="occurrenceremarks" type="TEXT"/>
            <column name="occurrencestatus" type="TEXT"/>
            <column name="_order" type="TEXT"/>
            <column name="originalnameusage" type="TEXT"/>
            <column name="originalnameusageid" type="TEXT"/>
            <column name="othercatalognumbers" type="TEXT"/>
            <column name="ownerinstitutioncode" type="TEXT"/>
            <column name="parentnameusage" type="TEXT"/>
            <column name="parentnameusageid" type="TEXT"/>
            <column name="phylum" type="TEXT"/>
            <column name="pointradiusspatialfit" type="TEXT"/>
            <column name="preparations" type="TEXT"/>
            <column name="previousidentifications" type="TEXT"/>
            <column name="recordedby" type="TEXT"/>
            <column name="recordnumber" type="TEXT"/>
            <column name="_references" type="TEXT"/>
            <column name="reproductivecondition" type="TEXT"/>
            <column name="rights" type="TEXT"/>
            <column name="rightsholder" type="TEXT"/>
            <column name="samplingeffort" type="TEXT"/>
            <column name="samplingprotocol" type="TEXT"/>
            <column name="scientificname" type="TEXT"/>
            <column name="scientificnameauthorship" type="TEXT"/>
            <column name="scientificnameid" type="TEXT"/>
            <column name="sex" type="TEXT"/>
            <column name="specificepithet" type="TEXT"/>
            <column name="startdayofyear" type="TEXT"/>
            <column name="stateprovince" type="TEXT"/>
            <column name="subgenus" type="TEXT"/>
            <column name="taxonconceptid" type="TEXT"/>
            <column name="taxonid" type="TEXT"/>
            <column name="taxonomicstatus" type="TEXT"/>
            <column name="taxonrank" type="TEXT"/>
            <column name="taxonremarks" type="TEXT"/>
            <column name="type" type="TEXT"/>
            <column name="typestatus" type="TEXT"/>
            <column name="verbatimcoordinates" type="TEXT"/>
            <column name="verbatimcoordinatesystem" type="TEXT"/>
            <column name="verbatimdepth" type="TEXT"/>
            <column name="verbatimelevation" type="TEXT"/>
            <column name="verbatimeventdate" type="TEXT"/>
            <column name="verbatimlatitude" type="TEXT"/>
            <column name="verbatimlocality" type="TEXT"/>
            <column name="verbatimlongitude" type="TEXT"/>
            <column name="verbatimsrs" type="TEXT"/>
            <column name="verbatimtaxonrank" type="TEXT"/>
            <column name="vernacularname" type="TEXT"/>
            <column name="waterbody" type="TEXT"/>
            <column name="year" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-9">
        <createTable tableName="publisher">
            <column autoIncrement="true" name="auto_id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="publisher_pkey"/>
            </column>
            <column name="name" type="TEXT"/>
            <column name="description" type="TEXT"/>
            <column name="address" type="TEXT"/>
            <column name="city" type="TEXT"/>
            <column name="administrative_area" type="TEXT"/>
            <column name="postal_code" type="TEXT"/>
            <column name="homepage" type="TEXT"/>
            <column name="email" type="TEXT"/>
            <column name="phone" type="TEXT"/>
            <column name="logo_url" type="TEXT"/>
            <column name="decimallatitude" type="FLOAT8"/>
            <column name="decimallongitude" type="FLOAT8"/>
            <column name="record_count" type="INT4"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-10">
        <createTable tableName="resource_metadata">
            <column name="dwca_resource_id" type="INT4">
                <constraints nullable="false"/>
            </column>
            <column name="resource_uuid" type="TEXT"/>
            <column name="resource_name" type="TEXT"/>
            <column name="alternate_identifier" type="TEXT"/>
            <column name="title" type="TEXT"/>
            <column name="publication_date" type="date"/>
            <column name="language" type="TEXT"/>
            <column name="_abstract" type="TEXT"/>
            <column name="keyword" type="TEXT"/>
            <column name="keyword_thesaurus" type="TEXT"/>
            <column name="intellectual_rights" type="TEXT"/>
            <column name="citation" type="TEXT"/>
            <column name="hierarchy_level" type="TEXT"/>
            <column name="resource_logo_url" type="TEXT"/>
            <column name="parent_collection_identifier" type="TEXT"/>
            <column name="collection_identifier" type="TEXT"/>
            <column name="collection_name" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-11">
        <createTable tableName="spatial_ref_sys">
            <column name="srid" type="INT4">
                <constraints nullable="false"/>
            </column>
            <column name="auth_name" type="VARCHAR(256)"/>
            <column name="auth_srid" type="INT4"/>
            <column name="srtext" type="VARCHAR(2048)"/>
            <column name="proj4text" type="VARCHAR(2048)"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-12">
        <createTable tableName="unique_values">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="unique_values_pkey"/>
            </column>
            <column name="key" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="occurrence_count" type="INT4">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="unaccented_value" type="TEXT"/>
        </createTable>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-13">
        <addPrimaryKey columnNames="schema_version" constraintName="db_metadata_pkey" tableName="db_metadata"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-14">
        <addPrimaryKey columnNames="auto_id" constraintName="occurrence_extension_pkey" tableName="occurrence_extension"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-15">
        <addPrimaryKey columnNames="auto_id" constraintName="occurrence_pkey" tableName="occurrence"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-16">
        <addPrimaryKey columnNames="auto_id" constraintName="occurrence_raw_pkey" tableName="occurrence_raw"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-17">
        <addPrimaryKey columnNames="dwca_resource_id" constraintName="resource_metadata_pkey" tableName="resource_metadata"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-18">
        <addPrimaryKey columnNames="srid" constraintName="spatial_ref_sys_pkey" tableName="spatial_ref_sys"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-19">
        <addUniqueConstraint columnNames="sourcefileid" constraintName="dwca_resource_source_file_id_key" deferrable="false" disabled="false" initiallyDeferred="false" tableName="dwca_resource"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-20">
        <addUniqueConstraint columnNames="dwca_id, sourcefileid" constraintName="occurrence_raw_dwcaid_sourcefileid_key" deferrable="false" disabled="false" initiallyDeferred="false" tableName="occurrence_raw"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-21">
        <addForeignKeyConstraint baseColumnNames="publisher_fkey" baseTableName="contact" constraintName="contact_publisher_fkey_fkey" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="auto_id" referencedTableName="publisher"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-22">
        <addForeignKeyConstraint baseColumnNames="resource_metadata_fkey" baseTableName="contact" constraintName="contact_resource_metadata_fkey_fkey" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="dwca_resource_id" referencedTableName="resource_metadata"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-23">
        <addForeignKeyConstraint baseColumnNames="publisher_fkey" baseTableName="dwca_resource" constraintName="dwca_resource_publisher_fkey_fkey" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="auto_id" referencedTableName="publisher"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-24">
        <addForeignKeyConstraint baseColumnNames="dwca_resource_id" baseTableName="resource_metadata" constraintName="resource_metadata_dwca_resource_id_fkey" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="dwca_resource"/>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-25">
        <createView fullDefinition="false" viewName="complete_occurrence_view"> SELECT occ.catalognumber AS p_catalognumber, 
    occ.collectioncode AS p_collectioncode, 
    occ.continent AS p_continent, 
    occ.country AS p_country, 
    occ.datasetname AS p_datasetname, 
    occ.family AS p_family, 
    occ.habitat AS p_habitat, 
    occ.kingdom AS p_kingdom, 
    occ.locality AS p_locality, 
    occ._order AS p_order, 
    occ.recordedby AS p_recordedby, 
    occ.recordnumber AS p_recordnumber, 
    occ.scientificname AS p_scientificname, 
    occ.stateprovince AS p_stateprovince, 
    occ.taxonrank AS p_taxonrank, 
    occ.verbatimelevation AS p_verbatimelevation, 
    occ.minimumelevationinmeters AS p_minimumelevationinmeters, 
    occ.maximumelevationinmeters AS p_maximumelevationinmeters, 
    occ.decimallatitude AS p_decimallatitude, 
    occ.decimallongitude AS p_decimallongitude, 
    occ.eventdate AS p_eventdate, 
    occ.starteventdate AS p_starteventdate, 
    occ.endeventdate AS p_endeventdate, 
    occ.sday AS p_sday, 
    occ.smonth AS p_smonth, 
    occ.syear AS p_syear, 
    occ.eday AS p_eday, 
    occ.emonth AS p_emonth, 
    occ.eyear AS p_eyear, 
    occ.phylum AS p_phylum, 
    occ._class AS p_class, 
    occ.genus AS p_genus, 
    occ.specificepithet AS p_specificepithet, 
    occ.infraspecificepithet AS p_infraspecificepithet, 
    occ.associatedmedia AS p_associatedmedia, 
    occ.scientificnameauthorship AS p_scientificnameauthorship, 
    occ.institutioncode AS p_institutioncode, 
    occ.hascoordinates AS p_hascoordinates, 
    occ.hasmedia AS p_hasmedia, 
    occ.rawscientificname AS p_rawscientificname, 
    occ._references AS p_reference, 
    occ.county AS p_county, 
    occ.municipality AS p_municipality, 
    occ.decade AS p_decade, 
    occ.averagealtituderounded AS p_averagealtituderounded, 
    occ.dwca_id AS p_dwcaid, 
    raw.acceptednameusage, 
    raw.associatedmedia, 
    raw.associatedoccurrences, 
    raw.associatedreferences, 
    raw.associatedsequences, 
    raw.associatedtaxa, 
    raw.basisofrecord, 
    raw.behavior, 
    raw.bibliographiccitation, 
    raw.catalognumber, 
    raw.collectioncode, 
    raw.collectionid, 
    raw.continent, 
    raw.coordinateuncertaintyinmeters, 
    raw.country, 
    raw.countrycode, 
    raw.county, 
    raw.datasetid, 
    raw.datasetname, 
    raw.dateidentified, 
    raw.decimallatitude, 
    raw.decimallongitude, 
    raw.disposition, 
    raw.dynamicproperties, 
    raw.establishmentmeans, 
    raw.eventdate, 
    raw.eventremarks, 
    raw.eventtime, 
    raw.family, 
    raw.footprintwkt, 
    raw.genus, 
    raw.geodeticdatum, 
    raw.georeferencedby, 
    raw.georeferenceprotocol, 
    raw.georeferenceremarks, 
    raw.georeferencesources, 
    raw.georeferenceverificationstatus, 
    raw.habitat, 
    raw.higherclassification, 
    raw.identificationqualifier, 
    raw.identificationremarks, 
    raw.identifiedby, 
    raw.individualcount, 
    raw.infraspecificepithet, 
    raw.institutioncode, 
    raw.kingdom, 
    raw.language, 
    raw.lifestage, 
    raw.locality, 
    raw.locationremarks, 
    raw.maximumelevationinmeters, 
    raw.minimumelevationinmeters, 
    raw.modified, 
    raw.municipality, 
    raw.nomenclaturalcode, 
    raw.occurrenceid, 
    raw.occurrenceremarks, 
    raw.othercatalognumbers, 
    raw.ownerinstitutioncode, 
    raw.phylum, 
    raw.preparations, 
    raw.previousidentifications, 
    raw.recordedby, 
    raw.recordnumber, 
    raw.reproductivecondition, 
    raw.rights, 
    raw.rightsholder, 
    raw.samplingprotocol, 
    raw.scientificname, 
    raw.scientificnameauthorship, 
    raw.sex, 
    raw.specificepithet, 
    raw.stateprovince, 
    raw.taxonrank, 
    raw.taxonremarks, 
    raw.type, 
    raw.typestatus, 
    raw.verbatimcoordinates, 
    raw.verbatimcoordinatesystem, 
    raw.verbatimdepth, 
    raw.verbatimelevation, 
    raw.verbatimeventdate, 
    raw.verbatimlatitude, 
    raw.verbatimlongitude, 
    raw.verbatimsrs, 
    raw.waterbody
   FROM occurrence occ, 
    occurrence_raw raw
  WHERE (occ.auto_id = raw.auto_id);</createView>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-26">
        <createView fullDefinition="false" viewName="geography_columns"> SELECT current_database() AS f_table_catalog, 
    n.nspname AS f_table_schema, 
    c.relname AS f_table_name, 
    a.attname AS f_geography_column, 
    postgis_typmod_dims(a.atttypmod) AS coord_dimension, 
    postgis_typmod_srid(a.atttypmod) AS srid, 
    postgis_typmod_type(a.atttypmod) AS type
   FROM pg_class c, 
    pg_attribute a, 
    pg_type t, 
    pg_namespace n
  WHERE (((((((t.typname = 'geography'::name) AND (a.attisdropped = false)) AND (a.atttypid = t.oid)) AND (a.attrelid = c.oid)) AND (c.relnamespace = n.oid)) AND (NOT pg_is_other_temp_schema(c.relnamespace))) AND has_table_privilege(c.oid, 'SELECT'::text));</createView>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-27">
        <createView fullDefinition="false" viewName="geometry_columns"> SELECT (current_database())::character varying(256) AS f_table_catalog, 
    (n.nspname)::character varying(256) AS f_table_schema, 
    (c.relname)::character varying(256) AS f_table_name, 
    (a.attname)::character varying(256) AS f_geometry_column, 
    COALESCE(NULLIF(postgis_typmod_dims(a.atttypmod), 2), postgis_constraint_dims((n.nspname)::text, (c.relname)::text, (a.attname)::text), 2) AS coord_dimension, 
    COALESCE(NULLIF(postgis_typmod_srid(a.atttypmod), 0), postgis_constraint_srid((n.nspname)::text, (c.relname)::text, (a.attname)::text), 0) AS srid, 
    (replace(replace(COALESCE(NULLIF(upper(postgis_typmod_type(a.atttypmod)), 'GEOMETRY'::text), (postgis_constraint_type((n.nspname)::text, (c.relname)::text, (a.attname)::text))::text, 'GEOMETRY'::text), 'ZM'::text, ''::text), 'Z'::text, ''::text))::character varying(30) AS type
   FROM pg_class c, 
    pg_attribute a, 
    pg_type t, 
    pg_namespace n
  WHERE (((((((((t.typname = 'geometry'::name) AND (a.attisdropped = false)) AND (a.atttypid = t.oid)) AND (a.attrelid = c.oid)) AND (c.relnamespace = n.oid)) AND ((((c.relkind = 'r'::"char") OR (c.relkind = 'v'::"char")) OR (c.relkind = 'm'::"char")) OR (c.relkind = 'f'::"char"))) AND (NOT pg_is_other_temp_schema(c.relnamespace))) AND (NOT ((n.nspname = 'public'::name) AND (c.relname = 'raster_columns'::name)))) AND has_table_privilege(c.oid, 'SELECT'::text));</createView>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-28">
        <createView fullDefinition="false" viewName="raster_columns"> SELECT current_database() AS r_table_catalog, 
    n.nspname AS r_table_schema, 
    c.relname AS r_table_name, 
    a.attname AS r_raster_column, 
    COALESCE(_raster_constraint_info_srid(n.nspname, c.relname, a.attname), ( SELECT st_srid('010100000000000000000000000000000000000000'::geometry) AS st_srid)) AS srid, 
    _raster_constraint_info_scale(n.nspname, c.relname, a.attname, 'x'::bpchar) AS scale_x, 
    _raster_constraint_info_scale(n.nspname, c.relname, a.attname, 'y'::bpchar) AS scale_y, 
    _raster_constraint_info_blocksize(n.nspname, c.relname, a.attname, 'width'::text) AS blocksize_x, 
    _raster_constraint_info_blocksize(n.nspname, c.relname, a.attname, 'height'::text) AS blocksize_y, 
    COALESCE(_raster_constraint_info_alignment(n.nspname, c.relname, a.attname), false) AS same_alignment, 
    COALESCE(_raster_constraint_info_regular_blocking(n.nspname, c.relname, a.attname), false) AS regular_blocking, 
    _raster_constraint_info_num_bands(n.nspname, c.relname, a.attname) AS num_bands, 
    _raster_constraint_info_pixel_types(n.nspname, c.relname, a.attname) AS pixel_types, 
    _raster_constraint_info_nodata_values(n.nspname, c.relname, a.attname) AS nodata_values, 
    _raster_constraint_info_out_db(n.nspname, c.relname, a.attname) AS out_db, 
    _raster_constraint_info_extent(n.nspname, c.relname, a.attname) AS extent
   FROM pg_class c, 
    pg_attribute a, 
    pg_type t, 
    pg_namespace n
  WHERE (((((((t.typname = 'raster'::name) AND (a.attisdropped = false)) AND (a.atttypid = t.oid)) AND (a.attrelid = c.oid)) AND (c.relnamespace = n.oid)) AND ((c.relkind)::text = ANY ((ARRAY['r'::character(1), 'v'::character(1), 'm'::character(1), 'f'::character(1)])::text[]))) AND (NOT pg_is_other_temp_schema(c.relnamespace)));</createView>
    </changeSet>
    <changeSet author="pedro (generated)" id="1425320964738-29">
        <createView fullDefinition="false" viewName="raster_overviews"> SELECT current_database() AS o_table_catalog, 
    n.nspname AS o_table_schema, 
    c.relname AS o_table_name, 
    a.attname AS o_raster_column, 
    current_database() AS r_table_catalog, 
    (split_part(split_part(s.consrc, '''::name'::text, 1), ''''::text, 2))::name AS r_table_schema, 
    (split_part(split_part(s.consrc, '''::name'::text, 2), ''''::text, 2))::name AS r_table_name, 
    (split_part(split_part(s.consrc, '''::name'::text, 3), ''''::text, 2))::name AS r_raster_column, 
    (btrim(split_part(s.consrc, ','::text, 2)))::integer AS overview_factor
   FROM pg_class c, 
    pg_attribute a, 
    pg_type t, 
    pg_namespace n, 
    pg_constraint s
  WHERE ((((((((((t.typname = 'raster'::name) AND (a.attisdropped = false)) AND (a.atttypid = t.oid)) AND (a.attrelid = c.oid)) AND (c.relnamespace = n.oid)) AND ((c.relkind)::text = ANY ((ARRAY['r'::character(1), 'v'::character(1), 'm'::character(1), 'f'::character(1)])::text[]))) AND (s.connamespace = n.oid)) AND (s.conrelid = c.oid)) AND (s.consrc ~~ '%_overview_constraint(%'::text)) AND (NOT pg_is_other_temp_schema(c.relnamespace)));</createView>
    </changeSet>
</databaseChangeLog>
